/**
 * @generated
 */
module.exports = [
  {
    "path": "2017/10/24/httpaccess.html",
    "content": "\n## Log into your server via SSH.\nNavigate to your user's directory.\nMake sure you have a /etc/nginx/example.com directory. This doesn't exist by default; you must create it by running the following:\n```\n[server]$ mkdir -p nginx/example.com\n```\n## Add code in /etc/nginx/conf.d/default.conf\n```\n  location / {\n    auth_basic \"Restricted\";\n    auth_basic_user_file /home/username/nginx/example.com/.htpasswd;\n  }\n```\n\n## Run the following to create the .htpasswd file:\n```\n[server]$ htpasswd -c /home/username/nginx/example.com/.htpasswd LOGIN\n\n```\n\nReload the nginx config file.\n",
    "title": "Nginx Protecting directories",
    "author": "Nguyễn thành công",
    "authorURL": "http://twitter.com/ericnakagawa",
    "authorFBID": 661277173,
    "id": "Nginx Protecting directories",
    "date": "2017-10-24T06:00:00.000Z",
    "seconds": 1508824800
  },
  {
    "path": "2017/09/26/ssl.html",
    "content": "\n# [SSL] Let's Encrypt\n\n## 1 Cài đặt Let’s Encrypt\n- Chúng ta sẽ clone mã nguồn của Let’s Encrypt về thư mục /opt/letsencrypt. Bước này thực hiện giống nhau trên CentOS 6 và 7.\n\n```\n# Install Git\nyum -y install git\n\n# Clone Let's Encrypt repository\ngit clone https://github.com/letsencrypt/letsencrypt /opt/letsencrypt\n```\n\n## 2 Phát hành chứng chỉ SSL Let’s Encrypt cho domain\n- Để phát hành chứng chỉ SSL Let’s Encrypt cho domain có rất nhiều cách, mình sẽ sử dụng option --standalone\n\n- Cho đến tháng 5, 2016, Certbot được gọi với tên letsencrypt hoặc letsencrypt-auto, tùy thuộc vào cách cài đặt. Một số bài hướng dẫn trên Internet vẫn sử dụng tên cũ này, trong bài hướng dẫn này sẽ sử dụng certbot-auto, tất cả đều tương tự nhau.\n\n```\n# Stop Nginx\nservice nginx stop\n\n# Issue SSL Let's Encrypt\n/opt/letsencrypt/certbot-auto certonly --standalone\n```\n\n- Chờ một lúc để Let’s Encrypt cài đặt những công cụ cần thiết. Sau đó bạn hãy nhập địa chỉ email, rồi nhấn phím Enter.\n\n```\nSaving debug log to /var/log/letsencrypt/letsencrypt.log\nPlugins selected: Authenticator standalone, Installer None\nEnter email address (used for urgent renewal and security notices) (Enter 'c' to\ncancel): ttl.cong@1pac.vn\n```\n\n- Chấp nhận quy định bằng cách nhập a, rồi nhấn tiếp Enter.\n\n```\nPlease read the Terms of Service at\nhttps://letsencrypt.org/documents/LE-SA-v1.2-November-15-2017.pdf. You must\nagree in order to register with the ACME server at\nhttps://acme-v02.api.letsencrypt.org/directory\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n(A)gree/(C)ancel: A\n```\n\n```\nWould you be willing to share your email address with the Electronic Frontier\nFoundation, a founding partner of the Let's Encrypt project and the non-profit\norganization that develops Certbot? We'd like to send you email about our work\nencrypting the web, EFF news, campaigns, and ways to support digital freedom.\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n(Y)es/(N)o: Y\n```\n\n- Tiếp theo bạn nhập tên miền sẽ sử dụng chứng chỉ SSL, rồi nhấn Enter. Bước này bạn chỉ nhập phiên bản non-www và www của 1 domain hoặc subdomain. Khi muốn thêm tên miền/subdomain khác bạn hãy xem hướng dẫn bên dưới.\n\n```\nPlease enter in your domain name(s) (comma and/or space separated)  (Enter 'c'\nto cancel): 1pac.vn www.1pac.vn\n```\n- Nếu không gặp vấn đề gì bạn sẽ gặp thông báo như bên dưới:\n\n```\nIMPORTANT NOTES:\n - Congratulations! Your certificate and chain have been saved at:\n   /etc/letsencrypt/live/1pac.vn/fullchain.pem\n   Your key file has been saved at:\n   /etc/letsencrypt/live/1pac.vn/privkey.pem\n   Your cert will expire on 2019-08-03. To obtain a new or tweaked\n   version of this certificate in the future, simply run certbot-auto\n   again. To non-interactively renew *all* of your certificates, run\n   \"certbot-auto renew\"\n - Your account credentials have been saved in your Certbot\n   configuration directory at /etc/letsencrypt. You should make a\n   secure backup of this folder now. This configuration directory will\n   also contain certificates and private keys obtained by Certbot so\n   making regular backups of this folder is ideal.\n - If you like Certbot, please consider supporting our work by:\n\n   Donating to ISRG / Let's Encrypt:   https://letsencrypt.org/donate\n   Donating to EFF:                    https://eff.org/donate-le\n\n```\n\n## GHI CHÚ :\n### Lỗi ImportError: No module named cryptography\n\n```\ncd /opt/eff.org/certbot/venv/lib64/python2.7\nrmdir site-packages (in my case, this directory was empty)\nln -s dist-packages site-packages\n```\n\n```\nrm -rf ~/.local/share/letsencrypt\nrm -rf /opt/eff.org/*\n```\n\n###  Kiểm tra các file cert được sinh ra\n\n```\nsudo ls /etc/letsencrypt/live/DOMAIN_HERE\n```\n### Backup các file cert\n\n```\nsudo cp -r /etc/letsencrypt/live/DOMAIN_HERE ../sslcert\n```\n\n### Config nginx\n\n```\n...\n# tự động chuyển toàn bộ url http sang https\nserver {\n     listen  80;\n     server_name  localhost;\n     return 301 https://$host$request_uri;\n}\n\n#cấu hình server https\nserver {\n    listen       443 ssl;\n    server_name  localhost;\n    #use fullchain.pem instead of cert.pem\n    ssl_certificate         /etc/letsencrypt/live/DOMAIN_HERE/fullchain.pem;\n    ssl_certificate_key     /etc/letsencrypt/live/DOMAIN_HERE/privkey.pem;\n    ...\n}\n...\n```\n\n### Gia hạn SSL CERT \n- Chứng chỉ Let’s Encrypt chỉ sử dụng được trong vòng 90 ngày và bạn cần phải chạy lại dòng lệnh bên dưới để gia hạn.\n\n```\n/opt/letsencrypt/certbot-auto renew --pre-hook \"service nginx stop\" --post-hook \"service nginx start\"\n```\n\n- Tuy nhiên, mình sẽ hướng dẫn các bạn cấu hình để tự động gia hạn chứng chỉ này với crontab, như vậy chúng ta sẽ sử dụng SSL miễn phí trọn đời mà không cần phải lo về việc gia hạn nữa.\n\n- Mở file cấu hình crontab:\n\n```\n EDITOR=nano crontab -e\n```\n\n- Copy và paste đoạn code bên dưới vào cửa sổ terminal:\n\n```\n30 2 * * * /opt/letsencrypt/certbot-auto renew --pre-hook \"service nginx stop\" --post-hook \"service nginx start\" >> /var/log/le-renew.log\n```\n\nNhấn Ctrl+O, Enter để lưu và Ctrl+X để thoát. Bạn nhận được thông báo sau là thành công\n\ncrontab: installing new crontab\ncrontab trên sẽ tự động chạy lệnh gia hạn Let’s Encrypt vào lúc 2h30 hàng ngày và kiểm tra xem đã hết hạn chưa và tiến hành gia hạn. Trước khi gia hạn sẽ stop Nginx, sau đó sẽ start lại ngay lập tức. Như vậy, gần như không ảnh hưởng gì cả đến website.\n\nVậy là xong, bạn có thể yên tâm sử dụng Let’s Encrypt rồi đấy.\n\n#### NOTE\nrenew ssl\n\n```\nsudo ls -la /etc/letsencrypt/live/\n- domain\nsudo certbot renew --cert-name domain\n\ncertbot-auto renew\n```\n\n### fix\n\n```\nStep 1. Edit the file /opt/letsencrypt/certbot-auto to recognize your version of Linux:\n$  sudo vim /opt/letsencrypt/certbot-auto\nfind this line in the file (likely near line nr 780):\n elif [ -f /etc/redhat-release ]; then\nand replace whole line with this:\n elif [ -f /etc/redhat-release ] || grep 'cpe:.*:amazon_linux:2' /etc/os-release > /dev/null 2>&1; then\nSave and exit vim (type :wq to do that)\nStep 2. Run below to obtain your certificates:\n$ sudo /opt/letsencrypt/certbot-auto certonly --webroot -w \n```\n\n#### Refs \n- 1 https://hocvps.com/cai-dat-lets-encrypt/\n- 2 https://dominhhai.github.io/vi/2017/02/free-ssl-with-let-encrypt/\n- 3 https://github.com/certbot/certbot/issues/2544 \n- 4 loi https://medium.com/@andrenakkurt/great-guide-thanks-for-putting-this-together-gifford-nowland-c3ce0ea2455",
    "title": "SSL Let's Encrypt",
    "author": "Eric Nakagawa",
    "authorURL": "http://twitter.com/ericnakagawa",
    "authorFBID": 661277173,
    "id": "SSL Let's Encrypt",
    "date": "2017-09-26T06:00:00.000Z",
    "seconds": 1506405600
  }
];
